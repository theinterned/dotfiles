"use strict";var T=Object.defineProperty;var V=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var D=Object.prototype.hasOwnProperty;var I=(r,t)=>{for(var i in t)T(r,i,{get:t[i],enumerable:!0})},A=(r,t,i,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of x(t))!D.call(r,n)&&n!==i&&T(r,n,{get:()=>t[n],enumerable:!(o=V(t,n))||o.enumerable});return r};var v=r=>A(T({},"__esModule",{value:!0}),r);var H={};I(H,{default:()=>M});module.exports=v(H);var s=require("@raycast/api"),h=require("react");var m=require("@raycast/api"),N=require("child_process"),E=require("crypto"),u=require("fs");var P=r=>{let t=Math.floor(r/3600),i=String(Math.floor(r%3600/60)).padStart(2,"0"),o=String(Math.floor(r%60)).padStart(2,"0");return`${t}:${i}:${o}`};var g=m.environment.supportPath+"/customTimers.json";async function w(r,t="Untitled"){let o=(m.environment.supportPath+"/"+new Date().toISOString()+"---"+r+".timer").replace(/:/g,"__");(0,u.writeFileSync)(o,t);let n=(0,m.getPreferenceValues)(),f=`${m.environment.assetsPath+"/"+n.selectedSound}`,c=`sleep ${r} && if [ -f "${o}" ]; then `;if(n.selectedSound==="speak_timer_name"?c+=`say "${t}"`:c+=`afplay "${f}"`,n.ringContinuously){let l=`${o}`.replace(".timer",".dismiss");(0,u.writeFileSync)(l,".dismiss file for Timers"),c+=` && while [ -f "${l}" ]; do afplay "${f}"; done`}c+=` && osascript -e 'display notification "Timer \\"${t}\\" complete" with title "Ding!"' && rm "${o}"; else echo "Timer deleted"; fi`,(0,N.exec)(c,(l,p)=>{if(l){console.log(`error: ${l.message}`);return}if(p){console.log(`stderr: ${p}`);return}}),(0,m.popToRoot)(),await(0,m.showHUD)(`Timer "${t}" started for ${P(r)}! \u{1F389}`)}function b(){(0,u.existsSync)(g)||(0,u.writeFileSync)(g,JSON.stringify({}))}function O(r){b();let t=JSON.parse((0,u.readFileSync)(g,"utf8"));t[(0,E.randomUUID)()]=r,(0,u.writeFileSync)(g,JSON.stringify(t))}var d=require("react/jsx-runtime");function M(r){let t=Object.values(r.arguments).some(e=>e!==""),[i,o]=(0,h.useState)(),[n,f]=(0,h.useState)(),[c,l]=(0,h.useState)(),p=e=>{if(b(),e.hours===""&&e.minutes===""&&e.seconds==="")new s.Toast({style:s.Toast.Style.Failure,title:"No values set for timer length!"}).show();else if(isNaN(Number(e.hours)))o("Hours must be a number!");else if(isNaN(Number(e.minutes)))f("Minutes must be a number!");else if(isNaN(Number(e.seconds)))l("Seconds must be a number!");else{(0,s.closeMainWindow)();let a=e.name?e.name:"Untitled",F=3600*Number(e.hours)+60*Number(e.minutes)+Number(e.seconds);w(F,a),e.willBeSaved&&O({name:e.name,timeInSeconds:F})}},$=()=>{i&&i.length>0&&o(void 0)},y=()=>{n&&n.length>0&&f(void 0)},C=()=>{c&&c.length>0&&l(void 0)},S=[{id:"hours",title:"Hours",placeholder:"0",err:i,drop:$,validator:e=>{let a=e.target.value;isNaN(Number(a))?o("Hours must be a number!"):$()}},{id:"minutes",title:"Minutes",placeholder:"00",err:n,drop:y,validator:e=>{let a=e.target.value;isNaN(Number(a))?f("Minutes must be a number!"):y()}},{id:"seconds",title:"Seconds",placeholder:"00",err:c,drop:C,validator:e=>{let a=e.target.value;isNaN(Number(a))?l("Seconds must be a number!"):C()}}];return(0,s.getPreferenceValues)().newTimerInputOrder!=="hhmmss"&&S.reverse(),(0,d.jsxs)(s.Form,{actions:(0,d.jsx)(s.ActionPanel,{children:(0,d.jsx)(s.Action.SubmitForm,{title:"Start Custom Timer",onSubmit:e=>p(e)})}),children:[S.map((e,a)=>(0,d.jsx)(s.Form.TextField,{id:e.id,title:e.title,placeholder:e.placeholder,defaultValue:r.arguments[e.id],error:e.err,onChange:e.drop,onBlur:e.validator},a)),(0,d.jsx)(s.Form.TextField,{id:"name",title:"Name",placeholder:"Pour Tea",autoFocus:t}),(0,d.jsx)(s.Form.Checkbox,{id:"willBeSaved",label:"Save as preset"})]})}0&&(module.exports={});
