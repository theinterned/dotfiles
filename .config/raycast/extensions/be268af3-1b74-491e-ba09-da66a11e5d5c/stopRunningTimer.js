"use strict";var u=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var T=Object.prototype.hasOwnProperty;var h=(e,s)=>{for(var r in s)u(e,r,{get:s[r],enumerable:!0})},y=(e,s,r,t)=>{if(s&&typeof s=="object"||typeof s=="function")for(let i of S(s))!T.call(e,i)&&i!==r&&u(e,i,{get:()=>s[i],enumerable:!(t=g(s,i))||t.enumerable});return e};var w=e=>y(u({},"__esModule",{value:!0}),e);var D={};h(D,{default:()=>$});module.exports=w(D);var o=require("@raycast/api");var n=require("@raycast/api"),m=require("child_process");var a=require("fs"),l=require("path");var f=e=>(e.d1=e.d1=="----"?void 0:e.d1,e.d2=e.d2=="----"?void 0:e.d2,Math.round((e.d1?new Date(e.d1):new Date).getTime()-(e.d2?new Date(e.d2):new Date).getTime())/1e3);var N=n.environment.supportPath+"/customTimers.json",J=n.environment.supportPath+"/defaultPresetVisibles.json";function d(e){let s=n.environment.supportPath+"/"+e,r=`if [ -f "${s}" ]; then rm "${s}"; else echo "Timer deleted"; fi`,t=s.replace(".timer",".dismiss"),i=`if [ -f "${t}" ]; then rm "${t}"; else echo "Timer deleted"; fi`;(0,m.execSync)(r),(0,m.execSync)(i)}function p(){let e=[];return(0,a.readdirSync)(n.environment.supportPath).forEach(r=>{if((0,l.extname)(r)==".timer"){let t={name:"",secondsSet:-99,timeLeft:-99,originalFile:r,timeEnds:new Date};t.name=(0,a.readFileSync)(n.environment.supportPath+"/"+r).toString();let i=r.split("---");t.secondsSet=Number(i[1].split(".")[0]);let c=i[0].replace(/__/g,":");t.timeLeft=Math.max(0,Math.round(t.secondsSet-f({d2:c}))),t.timeEnds=new Date(c),t.timeEnds.setSeconds(t.timeEnds.getSeconds()+t.secondsSet),e.push(t)}}),e.sort((r,t)=>r.timeLeft-t.timeLeft),e}var $=async()=>{let e=p();if(e.length===0)return await(0,o.showToast)({style:o.Toast.Style.Failure,title:"No timers found!"});d(e[0].originalFile),await(0,o.closeMainWindow)(),(0,o.showHUD)(`Timer "${e[0].name}" stopped!`)};
