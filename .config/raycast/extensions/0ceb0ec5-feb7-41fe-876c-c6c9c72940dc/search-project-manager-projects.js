"use strict";var ce=Object.create;var A=Object.defineProperty;var ae=Object.getOwnPropertyDescriptor;var le=Object.getOwnPropertyNames;var fe=Object.getPrototypeOf,ue=Object.prototype.hasOwnProperty;var x=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),pe=(e,t)=>{for(var n in t)A(e,n,{get:t[n],enumerable:!0})},q=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of le(t))!ue.call(e,o)&&o!==n&&A(e,o,{get:()=>t[o],enumerable:!(r=ae(t,o))||r.enumerable});return e};var T=(e,t,n)=>(n=e!=null?ce(fe(e)):{},q(t||!e||!e.__esModule?A(n,"default",{value:e,enumerable:!0}):n,e)),he=e=>q(A({},"__esModule",{value:!0}),e);var G=x(m=>{m.parse=m.decode=de;m.stringify=m.encode=M;m.safe=y;m.unsafe=C;var L=typeof process<"u"&&process.platform==="win32"?`\r
`:`
`;function M(e,t){var n=[],r="";typeof t=="string"?t={section:t,whitespace:!1}:(t=t||{},t.whitespace=t.whitespace===!0);var o=t.whitespace?" = ":"=";return Object.keys(e).forEach(function(s,a,f){var u=e[s];u&&Array.isArray(u)?u.forEach(function(p){r+=y(s+"[]")+o+y(p)+`
`}):u&&typeof u=="object"?n.push(s):r+=y(s)+o+y(u)+L}),t.section&&r.length&&(r="["+y(t.section)+"]"+L+r),n.forEach(function(s,a,f){var u=N(s).join("\\."),p=(t.section?t.section+".":"")+u,l=M(e[s],{section:p,whitespace:t.whitespace});r.length&&l.length&&(r+=L),r+=l}),r}function N(e){return e.replace(/\1/g,"LITERAL\\1LITERAL").replace(/\\\./g,"").split(/\./).map(function(t){return t.replace(/\1/g,"\\.").replace(/\2LITERAL\\1LITERAL\2/g,"")})}function de(e){var t={},n=t,r=null,o=/^\[([^\]]*)\]$|^([^=]+)(=(.*))?$/i,s=e.split(/[\r\n]+/g);return s.forEach(function(a,f,u){if(!(!a||a.match(/^\s*[;#]/))){var p=a.match(o);if(p){if(p[1]!==void 0){if(r=C(p[1]),r==="__proto__"){n={};return}n=t[r]=t[r]||{};return}var l=C(p[2]);if(l!=="__proto__"){var g=p[3]?C(p[4]):!0;switch(g){case"true":case"false":case"null":g=JSON.parse(g)}if(l.length>2&&l.slice(-2)==="[]"){if(l=l.substring(0,l.length-2),l==="__proto__")return;n[l]?Array.isArray(n[l])||(n[l]=[n[l]]):n[l]=[]}Array.isArray(n[l])?n[l].push(g):n[l]=g}}}}),Object.keys(t).filter(function(a,f,u){if(!t[a]||typeof t[a]!="object"||Array.isArray(t[a]))return!1;var p=N(a),l=t,g=p.pop(),k=g.replace(/\\\./g,".");return p.forEach(function(E,De,Re){E!=="__proto__"&&((!l[E]||typeof l[E]!="object")&&(l[E]={}),l=l[E])}),l===t&&k===g?!1:(l[k]=t[a],!0)}).forEach(function(a,f,u){delete t[a]}),t}function B(e){return e.charAt(0)==='"'&&e.slice(-1)==='"'||e.charAt(0)==="'"&&e.slice(-1)==="'"}function y(e){return typeof e!="string"||e.match(/[=\r\n]/)||e.match(/^\[/)||e.length>1&&B(e)||e!==e.trim()?JSON.stringify(e):e.replace(/;/g,"\\;").replace(/#/g,"\\#")}function C(e,t){if(e=(e||"").trim(),B(e)){e.charAt(0)==="'"&&(e=e.substr(1,e.length-2));try{e=JSON.parse(e)}catch{}}else{for(var n=!1,r="",o=0,s=e.length;o<s;o++){var a=e.charAt(o);if(n)"\\;#".indexOf(a)!==-1?r+=a:r+="\\"+a,n=!1;else{if(";#".indexOf(a)!==-1)break;a==="\\"?n=!0:r+=a}}return n&&(r+="\\"),r.trim()}return e}});var K=x((ke,W)=>{"use strict";var V=require("fs"),J=require("os"),I=require("path");W.exports=function(e,t){typeof e!="string"&&(t=e,e=null);let n=Object.assign({cwd:process.cwd(),type:e},t),r;if(n.type==="global"?r=I.join(J.homedir(),".gitconfig"):r=I.resolve(n.cwd,".git/config"),!V.existsSync(r)){if(typeof n.type=="string")return null;r=I.join(J.homedir(),".config/git/config")}return V.existsSync(r)?r:null}});var Y=x((qe,X)=>{"use strict";var _=require("fs"),ge=require("os"),j=require("path"),U=require("util"),me=G(),ye=K(),z=e=>e?e.replace(/^~/,ge.homedir()):"",h=(e,t)=>(typeof e=="function"&&(t=e,e=null),typeof t!="function"?h.promise(e):h.promise(e).then(n=>t(null,n)).catch(t));h.promise=e=>{let t=h.resolveConfigPath(e),n=U.promisify(_.readFile),r=U.promisify(_.stat);return t?r(t).then(()=>n(t,"utf8")).then(o=>(e&&e.include===!0&&(o=H(o,j.resolve(j.dirname(t)))),Q(o,e))):Promise.resolve(null)};h.sync=e=>{let t=h.resolveConfigPath(e);if(t&&_.existsSync(t)){let n=_.readFileSync(t,"utf8");if(e&&e.include===!0){let r=j.resolve(j.dirname(t));n=H(n,r)}return Q(n,e)}return{}};h.resolveConfigPath=e=>{typeof e=="string"&&(e={type:e});let t=Object.assign({cwd:process.cwd()},e),n=t.path?z(t.path):ye(t.type);return n?j.resolve(t.cwd,n):null};h.resolve=e=>h.resolveConfigPath(e);h.expandKeys=e=>{for(let t of Object.keys(e)){let n=/(\S+) "(.*)"/.exec(t);if(!n)continue;let r=n[1];e[r]=e[r]||{},e[r][n[2]]=e[t],delete e[t]}return e};function Q(e,t){let n=Object.assign({},t);e=e.replace(/\[(\S+) "(.*)"\]/g,(o,s,a)=>s&&a?`[${s} "${a.split(".").join("\\.")}"]`:o);let r=me.parse(e);return n.expandKeys===!0?h.expandKeys(r):r}function H(e,t){let n=e.split(`
`).filter(s=>s.trim()!==""),r=n.length,o=[];for(let s=0;s<r;s++){let a=n[s];if(a.indexOf("[include]")===0){let f=n[s+1].replace(/^\s*path\s*=\s*/,""),u=j.resolve(t,z(f));o.push(_.readFileSync(u))}else o.push(a)}return o.join(`
`)}X.exports=h});var be={};pe(be,{default:()=>ie});module.exports=he(be);var i=require("@raycast/api"),te=require("child_process"),d=require("fs"),re=require("os"),ne=T(Y()),F=require("path"),O=require("react");var w=T(require("node:path"),1),ee=T(require("node:os"),1),Z=ee.default.homedir();function b(e){let t=w.default.normalize(e)+w.default.sep;return(t.startsWith(Z)?t.replace(Z+w.default.sep,`~${w.default.sep}`):t).slice(0,-1)}var c=require("react/jsx-runtime"),S=(0,i.getPreferenceValues)(),D=S.gitClientApp?.path||"",je=(0,d.existsSync)(D),R=S.terminalApp?.path||"",Pe=(0,d.existsSync)(R),{vscodeApp:P}=S,$=P?.name.replace(/^Visual Studio /,"")||"",Se=$.replace(/[ -]+/g,"-").toLowerCase(),v=`${(0,re.homedir)()}/Library/Application Support/${$}/User/globalStorage/alefragnani.project-manager`,oe="vscode-remote://";function Ee(){let e=Ae()||v,t=`${e}/projects.json`,n=[`${e}/projects_cache_git.json`,`${e}/projects_cache_any.json`,`${e}/projects_cache_vscode.json`],r=[];if((0,d.existsSync)(t)){let o=JSON.parse((0,d.readFileSync)(t).toString());r.push(...o)}return n.forEach(o=>{(0,d.existsSync)(o)&&JSON.parse((0,d.readFileSync)(o).toString()).forEach(({name:a,fullPath:f})=>{r.find(({rootPath:u})=>u===f)||r.push({name:a,rootPath:f,tags:[],enabled:!0})})}),S.hideProjectsWithoutTag&&(r=r.filter(({tags:o})=>Array.isArray(o)&&o.length)),r}function _e(e){return e?.reduce((t,n)=>(n.tags?.forEach(r=>{t.includes(r)||t.push(r)}),t.sort((r,o)=>r.toLowerCase().localeCompare(o.toLowerCase()))),[])}var we=(e,t)=>e.filter(n=>t?n.tags?.find(r=>r===t):!0);function Ae(){let e=S.projectManagerDataPath;if(e&&(0,d.existsSync)(e)){let t=(0,d.lstatSync)(e);if(t.isDirectory())return e;if(t.isFile())return(0,F.dirname)(e)}}function Ce(e){return[...e].sort((n,r)=>n.name.localeCompare(r.name))}function ve(e){let t=new Map;return e.forEach(n=>{(n.tags?.length>0?n.tags:["[no tags]"]).forEach(o=>{let s=[];t.has(o)&&s.push(...t.get(o)||[]),s.push(n),t.set(o,s)})}),new Map([...t.entries()].sort())}function Oe(e){let t=ve(e),n=[];return t.forEach((r,o)=>{n.push((0,c.jsx)(i.List.Section,{title:o,children:r?.map((s,a)=>(0,c.jsx)(se,{...s},s.rootPath+a))},o))}),n}function ie(){if(!P)return(0,c.jsx)(i.Detail,{markdown:"Please configure the **Search Project Manager** Raycast extension to choose which version of Visual Studio Code to use."});let e=[],t=Ee(),n=_e(t),[r,o]=(0,O.useState)("");if(!t||t.length===0)return(0,c.jsx)(i.Detail,{markdown:`To use this extension, the Visual Studio Extension
      [Project Manager](https://marketplace.visualstudio.com/items?itemName=alefragnani.project-manager)
       is required and at least one project must be saved in the Project Manager.`});let s=Ce(t);if(S.groupProjectsByTag&&!r){let f=Oe(s);e.push(...f)}else we(s,r).forEach((f,u)=>{e.push((0,c.jsx)(se,{...f},f.rootPath+u))});let a=f=>{o(f)};return(0,c.jsx)(i.List,{searchBarPlaceholder:"Search projects ...",searchBarAccessory:n.length?(0,c.jsxs)(i.List.Dropdown,{tooltip:"Tags filter",onChange:a,defaultValue:void 0,children:[(0,c.jsx)(i.List.Dropdown.Section,{children:(0,c.jsx)(i.List.Dropdown.Item,{title:"All Tags",value:""},"0")}),(0,c.jsx)(i.List.Dropdown.Section,{title:"Tags",children:n.map((f,u)=>(0,c.jsx)(i.List.Dropdown.Item,{title:f,value:f},"tag-"+u))})]}):null,children:(0,c.jsx)(O.Fragment,{children:e})})}function se({name:e,rootPath:t,tags:n}){let r=t,o=b(r),s=(0,F.dirname)(o);return(0,c.jsx)(i.List.Item,{title:e,subtitle:s,icon:{fileIcon:r},keywords:n,accessories:[{text:n?.join(", ")}],actions:(0,c.jsxs)(i.ActionPanel,{children:[(0,c.jsxs)(i.ActionPanel.Section,{children:[Le(r)?(0,c.jsx)(i.Action,{title:`Open in ${P.name} (Remote)`,icon:{fileIcon:P.path},onAction:()=>{(0,te.exec)(`${Se} --remote ${Ie(r)}`),(0,i.closeMainWindow)()}}):(0,c.jsx)(i.Action.Open,{title:`Open in ${$}`,icon:{fileIcon:P.path},target:r,application:P.path}),Pe&&(0,c.jsx)(i.Action.Open,{title:"Open in Terminal",icon:{fileIcon:R},shortcut:{modifiers:["cmd"],key:"t"},target:r,application:R},"terminal"),je&&Te(r)&&(0,c.jsx)(i.Action.Open,{title:"Open in Git client",icon:{fileIcon:D},shortcut:{modifiers:["cmd"],key:"g"},target:r,application:D},"git-client"),(0,c.jsx)(i.Action.ShowInFinder,{path:r}),(0,c.jsx)(i.Action.OpenWith,{path:r,shortcut:{modifiers:["cmd"],key:"o"}})]}),(0,c.jsxs)(i.ActionPanel.Section,{children:[(0,c.jsx)(i.Action.CopyToClipboard,{title:"Copy Name",content:e,shortcut:{modifiers:["cmd"],key:"."}}),(0,c.jsx)(i.Action.CopyToClipboard,{title:"Copy Path",content:o,shortcut:{modifiers:["cmd","shift"],key:"."}})]}),(0,c.jsx)(i.ActionPanel.Section,{children:(0,c.jsx)(i.Action.Trash,{paths:[r],shortcut:{modifiers:["ctrl"],key:"x"}})}),(0,c.jsx)(xe,{})]})})}function xe(){return i.environment.isDevelopment?(0,c.jsxs)(i.ActionPanel.Section,{title:"Development",children:[(0,c.jsx)(i.Action.Open,{title:"Open projects.json File in Code",icon:"command-icon.png",target:v,application:"Visual Studio Code"}),(0,c.jsx)(i.Action.ShowInFinder,{title:"Show projects.json File in Finder",path:v}),(0,c.jsx)(i.Action.CopyToClipboard,{title:"Copy projects.json File Path",content:v})]}):null}function Te(e){return!!ne.default.sync({cwd:e,path:".git/config",expandKeys:!0}).core}function Le(e){return e.startsWith(oe)}function Ie(e){e=e.slice(oe.length);let t=e.indexOf("/");return e.slice(0,t)+" "+e.slice(t)+"/"}
/*! Bundled license information:

git-config-path/index.js:
  (*!
   * git-config-path <https://github.com/jonschlinkert/git-config-path>
   *
   * Copyright (c) 2015-present, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

parse-git-config/index.js:
  (*!
   * parse-git-config <https://github.com/jonschlinkert/parse-git-config>
   *
   * Copyright (c) 2015-present, Jon Schlinkert.
   * Released under the MIT License.
   *)
*/
