"use strict";var le=Object.create;var C=Object.defineProperty;var fe=Object.getOwnPropertyDescriptor;var ue=Object.getOwnPropertyNames;var pe=Object.getPrototypeOf,he=Object.prototype.hasOwnProperty;var O=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),de=(e,t)=>{for(var n in t)C(e,n,{get:t[n],enumerable:!0})},k=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of ue(t))!he.call(e,o)&&o!==n&&C(e,o,{get:()=>t[o],enumerable:!(r=fe(t,o))||r.enumerable});return e};var T=(e,t,n)=>(n=e!=null?le(pe(e)):{},k(t||!e||!e.__esModule?C(n,"default",{value:e,enumerable:!0}):n,e)),ge=e=>k(C({},"__esModule",{value:!0}),e);var B=O(y=>{y.parse=y.decode=me;y.stringify=y.encode=q;y.safe=j;y.unsafe=v;var b=typeof process<"u"&&process.platform==="win32"?`\r
`:`
`;function q(e,t){var n=[],r="";typeof t=="string"?t={section:t,whitespace:!1}:(t=t||{},t.whitespace=t.whitespace===!0);var o=t.whitespace?" = ":"=";return Object.keys(e).forEach(function(c,a,p){var u=e[c];u&&Array.isArray(u)?u.forEach(function(f){r+=j(c+"[]")+o+j(f)+`
`}):u&&typeof u=="object"?n.push(c):r+=j(c)+o+j(u)+b}),t.section&&r.length&&(r="["+j(t.section)+"]"+b+r),n.forEach(function(c,a,p){var u=N(c).join("\\."),f=(t.section?t.section+".":"")+u,l=q(e[c],{section:f,whitespace:t.whitespace});r.length&&l.length&&(r+=b),r+=l}),r}function N(e){return e.replace(/\1/g,"LITERAL\\1LITERAL").replace(/\\\./g,"").split(/\./).map(function(t){return t.replace(/\1/g,"\\.").replace(/\2LITERAL\\1LITERAL\2/g,"")})}function me(e){var t={},n=t,r=null,o=/^\[([^\]]*)\]$|^([^=]+)(=(.*))?$/i,c=e.split(/[\r\n]+/g);return c.forEach(function(a,p,u){if(!(!a||a.match(/^\s*[;#]/))){var f=a.match(o);if(f){if(f[1]!==void 0){if(r=v(f[1]),r==="__proto__"){n={};return}n=t[r]=t[r]||{};return}var l=v(f[2]);if(l!=="__proto__"){var g=f[3]?v(f[4]):!0;switch(g){case"true":case"false":case"null":g=JSON.parse(g)}if(l.length>2&&l.slice(-2)==="[]"){if(l=l.substring(0,l.length-2),l==="__proto__")return;n[l]?Array.isArray(n[l])||(n[l]=[n[l]]):n[l]=[]}Array.isArray(n[l])?n[l].push(g):n[l]=g}}}}),Object.keys(t).filter(function(a,p,u){if(!t[a]||typeof t[a]!="object"||Array.isArray(t[a]))return!1;var f=N(a),l=t,g=f.pop(),M=g.replace(/\\\./g,".");return f.forEach(function(E,$e,Re){E!=="__proto__"&&((!l[E]||typeof l[E]!="object")&&(l[E]={}),l=l[E])}),l===t&&M===g?!1:(l[M]=t[a],!0)}).forEach(function(a,p,u){delete t[a]}),t}function V(e){return e.charAt(0)==='"'&&e.slice(-1)==='"'||e.charAt(0)==="'"&&e.slice(-1)==="'"}function j(e){return typeof e!="string"||e.match(/[=\r\n]/)||e.match(/^\[/)||e.length>1&&V(e)||e!==e.trim()?JSON.stringify(e):e.replace(/;/g,"\\;").replace(/#/g,"\\#")}function v(e,t){if(e=(e||"").trim(),V(e)){e.charAt(0)==="'"&&(e=e.substr(1,e.length-2));try{e=JSON.parse(e)}catch{}}else{for(var n=!1,r="",o=0,c=e.length;o<c;o++){var a=e.charAt(o);if(n)"\\;#".indexOf(a)!==-1?r+=a:r+="\\"+a,n=!1;else{if(";#".indexOf(a)!==-1)break;a==="\\"?n=!0:r+=a}}return n&&(r+="\\"),r.trim()}return e}});var K=O((ke,W)=>{"use strict";var G=require("fs"),J=require("os"),I=require("path");W.exports=function(e,t){typeof e!="string"&&(t=e,e=null);let n=Object.assign({cwd:process.cwd(),type:e},t),r;if(n.type==="global"?r=I.join(J.homedir(),".gitconfig"):r=I.resolve(n.cwd,".git/config"),!G.existsSync(r)){if(typeof n.type=="string")return null;r=I.join(J.homedir(),".config/git/config")}return G.existsSync(r)?r:null}});var Y=O((qe,X)=>{"use strict";var _=require("fs"),ye=require("os"),P=require("path"),z=require("util"),je=B(),Pe=K(),U=e=>e?e.replace(/^~/,ye.homedir()):"",h=(e,t)=>(typeof e=="function"&&(t=e,e=null),typeof t!="function"?h.promise(e):h.promise(e).then(n=>t(null,n)).catch(t));h.promise=e=>{let t=h.resolveConfigPath(e),n=z.promisify(_.readFile),r=z.promisify(_.stat);return t?r(t).then(()=>n(t,"utf8")).then(o=>(e&&e.include===!0&&(o=H(o,P.resolve(P.dirname(t)))),Q(o,e))):Promise.resolve(null)};h.sync=e=>{let t=h.resolveConfigPath(e);if(t&&_.existsSync(t)){let n=_.readFileSync(t,"utf8");if(e&&e.include===!0){let r=P.resolve(P.dirname(t));n=H(n,r)}return Q(n,e)}return{}};h.resolveConfigPath=e=>{typeof e=="string"&&(e={type:e});let t=Object.assign({cwd:process.cwd()},e),n=t.path?U(t.path):Pe(t.type);return n?P.resolve(t.cwd,n):null};h.resolve=e=>h.resolveConfigPath(e);h.expandKeys=e=>{for(let t of Object.keys(e)){let n=/(\S+) "(.*)"/.exec(t);if(!n)continue;let r=n[1];e[r]=e[r]||{},e[r][n[2]]=e[t],delete e[t]}return e};function Q(e,t){let n=Object.assign({},t);e=e.replace(/\[(\S+) "(.*)"\]/g,(o,c,a)=>c&&a?`[${c} "${a.split(".").join("\\.")}"]`:o);let r=je.parse(e);return n.expandKeys===!0?h.expandKeys(r):r}function H(e,t){let n=e.split(`
`).filter(c=>c.trim()!==""),r=n.length,o=[];for(let c=0;c<r;c++){let a=n[c];if(a.indexOf("[include]")===0){let p=n[c+1].replace(/^\s*path\s*=\s*/,""),u=P.resolve(t,U(p));o.push(_.readFileSync(u))}else o.push(a)}return o.join(`
`)}X.exports=h});var De={};de(De,{default:()=>ce});module.exports=ge(De);var i=require("@raycast/api"),te=require("child_process"),d=require("fs"),re=require("os"),ne=T(Y()),F=require("path"),L=require("react");var A=T(require("node:path"),1),ee=T(require("node:os"),1),Z=ee.default.homedir();function x(e){let t=A.default.normalize(e)+A.default.sep;return(t.startsWith(Z)?t.replace(Z+A.default.sep,`~${A.default.sep}`):t).slice(0,-1)}var s=require("react/jsx-runtime"),S=(0,i.getPreferenceValues)(),$=S.gitClientApp?.path||"",Se=(0,d.existsSync)($),R=S.terminalApp?.path||"",Ee=(0,d.existsSync)(R),{vscodeApp:m}=S,oe=m?.name.replace(/^Visual Studio /,"")||"",_e=`${m?.path}/Contents/Resources/app/bin/code`,w=`${(0,re.homedir)()}/Library/Application Support/${oe}/User/globalStorage/alefragnani.project-manager`,ie="vscode-remote://";function Ae(e){let t=`${e}/projects.json`,n=[`${e}/projects_cache_git.json`,`${e}/projects_cache_any.json`,`${e}/projects_cache_vscode.json`],r=[];if((0,d.existsSync)(t)){let o=JSON.parse((0,d.readFileSync)(t).toString());r.push(...o)}return n.forEach(o=>{(0,d.existsSync)(o)&&JSON.parse((0,d.readFileSync)(o).toString()).forEach(({name:a,fullPath:p})=>{r.find(({rootPath:u})=>u===p)||r.push({name:a,rootPath:p,tags:[],enabled:!0})})}),S.hideProjectsWithoutTag&&(r=r.filter(({tags:o})=>Array.isArray(o)&&o.length)),r}function we(e){return e?.reduce((t,n)=>(n.tags?.forEach(r=>{t.includes(r)||t.push(r)}),t.sort((r,o)=>r.toLowerCase().localeCompare(o.toLowerCase()))),[])}var Ce=(e,t)=>e.filter(n=>t?n.tags?.find(r=>r===t):!0);function se(){let e=S.projectManagerDataPath;if(!e)return{path:w};if(!(0,d.existsSync)(e))return{path:e,error:`Projects Location path does not exist: ${e}`};let t=(0,d.lstatSync)(e);return t.isDirectory()?{path:e}:t.isFile()?{path:(0,F.dirname)(e)}:{path:e,error:`Projects Location path is not a directory: ${e}`}}function ve(e){return[...e].sort((n,r)=>n.name.localeCompare(r.name))}function xe(e){let t=new Map;return e.forEach(n=>{(n.tags?.length>0?n.tags:["[no tags]"]).forEach(o=>{let c=[];t.has(o)&&c.push(...t.get(o)||[]),c.push(n),t.set(o,c)})}),new Map([...t.entries()].sort())}function Le(e){let t=xe(e),n=[];return t.forEach((r,o)=>{n.push((0,s.jsx)(i.List.Section,{title:o,children:r?.map((c,a)=>(0,s.jsx)(ae,{...c},c.rootPath+a))},o))}),n}function ce(){if(!m)return D("Please configure the **Search Project Manager** Raycast extension to choose which version of Visual Studio Code to use.");let{path:e,error:t}=se();if(t)return D("## Invalid Projects Location\n\n```\n"+e+`
\`\`\`

Please review the **Projects Location** setting in the extension configuration. 

This setting should only be set if Projects Location is also customized in the VS Code Project Manager extension settings.`);let n=Ae(e),r=we(n),[o,c]=(0,L.useState)("");if(!n||n.length===0)return D("To use this extension, the VS Code Extension [Project Manager](https://marketplace.visualstudio.com/items?itemName=alefragnani.project-manager) is required and at least one project must be saved in the Project Manager.");let a=ve(n),p=[];if(S.groupProjectsByTag&&!o){let f=Le(a);p.push(...f)}else Ce(a,o).forEach((f,l)=>{p.push((0,s.jsx)(ae,{...f},f.rootPath+l))});let u=f=>{c(f)};return(0,s.jsx)(i.List,{searchBarPlaceholder:"Search projects ...",searchBarAccessory:r.length?(0,s.jsxs)(i.List.Dropdown,{tooltip:"Tags filter",onChange:u,defaultValue:void 0,children:[(0,s.jsx)(i.List.Dropdown.Section,{children:(0,s.jsx)(i.List.Dropdown.Item,{title:"All Tags",value:""},"0")}),(0,s.jsx)(i.List.Dropdown.Section,{title:"Tags",children:r.map((f,l)=>(0,s.jsx)(i.List.Dropdown.Item,{title:f,value:f},"tag-"+l))})]}):null,children:(0,s.jsx)(L.Fragment,{children:p})})}function ae({name:e,rootPath:t,tags:n}){let r=t,o=x(r),c=(0,F.dirname)(o);return(0,s.jsx)(i.List.Item,{title:e,subtitle:c,icon:{fileIcon:r},keywords:n,accessories:[{text:n?.join(", ")}],actions:(0,s.jsxs)(i.ActionPanel,{children:[(0,s.jsxs)(i.ActionPanel.Section,{children:[be(r)?(0,s.jsx)(i.Action,{title:`Open in ${m.name} (Remote)`,icon:{fileIcon:m.path},onAction:()=>{(0,te.exec)(`"${_e}" --remote ${Ie(r)}`),(0,i.closeMainWindow)()}}):(0,s.jsx)(i.Action.Open,{title:`Open in ${oe}`,icon:{fileIcon:m.path},target:r,application:m.path}),Ee&&(0,s.jsx)(i.Action.Open,{title:"Open in Terminal",icon:{fileIcon:R},shortcut:{modifiers:["cmd"],key:"t"},target:r,application:R},"terminal"),Se&&Te(r)&&(0,s.jsx)(i.Action.Open,{title:"Open in Git client",icon:{fileIcon:$},shortcut:{modifiers:["cmd"],key:"g"},target:r,application:$},"git-client"),(0,s.jsx)(i.Action.ShowInFinder,{path:r}),(0,s.jsx)(i.Action.OpenWith,{path:r,shortcut:{modifiers:["cmd"],key:"o"}})]}),(0,s.jsxs)(i.ActionPanel.Section,{children:[(0,s.jsx)(i.Action.CopyToClipboard,{title:"Copy Name",content:e,shortcut:{modifiers:["cmd"],key:"."}}),(0,s.jsx)(i.Action.CopyToClipboard,{title:"Copy Path",content:o,shortcut:{modifiers:["cmd","shift"],key:"."}})]}),(0,s.jsx)(i.ActionPanel.Section,{children:(0,s.jsx)(i.Action.Trash,{paths:[r],shortcut:{modifiers:["ctrl"],key:"x"}})}),(0,s.jsx)(Oe,{})]})})}function D(e){let{path:t}=se();return(0,s.jsx)(i.Detail,{markdown:e,metadata:(0,s.jsxs)(i.Detail.Metadata,{children:[(0,s.jsx)(i.Detail.Metadata.Label,{title:"VS Code App",text:m?.name||"(unset)"}),(0,s.jsx)(i.Detail.Metadata.Label,{title:`Projects Location${t?"":" (Default)"}`,text:x(t||w)})]})})}function Oe(){return i.environment.isDevelopment?(0,s.jsxs)(i.ActionPanel.Section,{title:"Development",children:[(0,s.jsx)(i.Action.Open,{title:"Open projects.json File in Code",icon:"command-icon.png",target:w,application:"Visual Studio Code"}),(0,s.jsx)(i.Action.ShowInFinder,{title:"Show projects.json File in Finder",path:w}),(0,s.jsx)(i.Action.CopyToClipboard,{title:"Copy projects.json File Path",content:w})]}):null}function Te(e){return!!ne.default.sync({cwd:e,path:".git/config",expandKeys:!0}).core}function be(e){return e.startsWith(ie)}function Ie(e){e=e.slice(ie.length);let t=e.indexOf("/");return e.slice(0,t)+" "+e.slice(t)+"/"}
/*! Bundled license information:

git-config-path/index.js:
  (*!
   * git-config-path <https://github.com/jonschlinkert/git-config-path>
   *
   * Copyright (c) 2015-present, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

parse-git-config/index.js:
  (*!
   * parse-git-config <https://github.com/jonschlinkert/parse-git-config>
   *
   * Copyright (c) 2015-present, Jon Schlinkert.
   * Released under the MIT License.
   *)
*/
